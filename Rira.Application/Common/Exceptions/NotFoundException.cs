using System;

namespace Rira.Application.Common.Exceptions
{
    // ✅ Exception اختصاصی برای خطای «داده یافت نشد»
    // ---------------------------------------------------------------
    // در مواقعی که سرویس تلاش می‌کند داده‌ای با شناسهٔ مشخص را از دیتابیس دریافت کند و
    // آن داده وجود ندارد، باید NotFoundException پرتاب شود.
    //
    // این کلاس باعث می‌شود API بعداً بتواند خطای 404 بسازد،
    // و در تست‌های واحد بتوانیم رفتار عدم وجود داده را جداگانه بررسی کنیم.
    public class NotFoundException : Exception
    {
        // 🔹 نوع موجودیتی که پیدا نشد (مثلاً "Task" یا "User")
        public string EntityName { get; }

        // 🔹 شناسهٔ مورد جستجو که یافت نشد
        public object Key { get; }

        // 🧱 سازندهٔ اصلی برای ساخت پیام مشخص خطای عدم یافتن داده.
        public NotFoundException(string entityName, object key)
            : base($"موجودیت '{entityName}' با شناسهٔ '{key}' یافت نشد.")
        {
            EntityName = entityName;
            Key = key;
        }

        // 🧩 سازندهٔ عمومی برای پیام ساده (بدون شناسه)
        public NotFoundException(string message)
            : base(message)
        {
        }

        // ===========================================================================================
        // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
        // -------------------------------------------------------------------------------------------
        // این Exception برای مواقعی است که داده‌ای با شناسهٔ مشخص در دیتابیس وجود ندارد.
        // معمولاً در Handlerها پرتاب می‌شود تا توسط Middleware خطای 404 پاسخ داده شود.
        // به توسعه‌دهنده کمک می‌کند منطق «عدم وجود داده» را صریح، تست‌پذیر و استاندارد‌سازی کند.
        // ===========================================================================================
    }
}
