using System.Threading.Tasks;
using Rira.Application.DTOs;

namespace Rira.Application.Interfaces
{
    // 🧩 اینترفیس سرویس مربوط به کارمندان — IEmployeeService
    // -------------------------------------------------------------------
    // این Interface در لایه‌ی Application قرار دارد و مسئول تعریف متدهای سطح میانی (Business Logic Layer)
    // برای Entity مربوط به کارمندان است.
    //
    // 📌 وظیفه‌ی اصلی:
    //     ▫ نگهداری منطق‌ خاص دامنه که در هیچ Handler مستقیمی جای نمی‌گیرد.
    //     ▫ کمک به Handlerها برای اجرای اعتبارسنجی‌ها یا چک‌های سیستمی که 
    //       مستقیماً بخشی از عملیات CRUD نیستند.
    //
    // 🎯 همچنین باعث می‌شود لایه‌ی Application از وابستگی مستقیم به دیتابیس و EF Core جدا شود.
    //
    // ⚙️ پیاده‌سازی این Interface معمولاً در Infrastructure انجام می‌شود
    //     و در Handlerها تزریق (Dependency Injection) می‌گردد.
    public interface IEmployeeService
    {
        // 🔹 بررسی تکراری بودن ایمیل کارمند
        // -------------------------------------------------------------------
        // این متد بررسی می‌کند آیا ایمیلی که کاربر (کارمند) وارد کرده،
        // قبلاً توسط شخص دیگری در سیستم ثبت شده یا خیر.
        //
        // ⚙️ کاربرد معمول:
        //     ▫ در Command مربوط به Create یا Update در Handlerها.
        //     ▫ در Validatorها برای جلوگیری از ثبت داده‌های تکراری.
        //
        // 🧠 نکته:
        //     هر Handler از طریق IEmployeeService بیماری تکراری بودن ایمیل را
        //     بدون آگاهی مستقیم از نوع دیتابیس بررسی می‌کند.
        Task<bool> IsEmailDuplicateAsync(string email);

        // 🔹 بررسی تکراری بودن شماره موبایل کارمند
        // -------------------------------------------------------------------
        // این متد مشابه متد بالا عمل می‌کند اما برای شماره موبایل.
        // هدف آن کنترل یکتا بودن شماره جهت اعتبارسنجی صحیح هنگام ثبت یا ویرایش است.
        //
        // ⚙️ مثال استفاده:
        //     ▫ هنگام ثبت کارمند جدید، اگر موبایل تکراری باشد → ValidationException.
        //
        // 🧠 نکته معماری:
        //     این سطح از سرویس باعث می‌شود منطق Validation مستقل از Handler 
        //     و قابل استفاده در چندین نقطه از برنامه باشد.
        Task<bool> IsMobileDuplicateAsync(string mobileNumber);
    }

    // ===========================================================================================
    // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
    // -------------------------------------------------------------------------------------------
    // 🔹 نقش در معماری:
    //     ▫ Interface برای لایه‌ی سرویس Domain-Specific (میان لایه‌ی Handler و Data).
    //     ▫ تمرکز بر منطق خاص دامنه، نه عملیات CRUD.
    //     ▫ الگوی وارونگی وابستگی (Dependency Inversion Principle) در Clean Architecture.
    //
    // 🔹 استفاده‌های معمول:
    //     ▫ بررسی تکراری بودن داده در فرآیند ثبت (Prevent Duplicate Entries).
    //     ▫ پشتیبانی از سرویس‌های اعتبارسنجی یا قواعد خاص دامنه (Business Validation).
    //
    // 🔹 محل پیاده‌سازی:
    //     ▫ در پوشه‌ی Infrastructure → Services → EmployeeService.cs
    //     ▫ جهت تزریق در Handler و Validator مشخص از طریق DI (AddScoped)
    //
    // 🔹 تست‌پذیری:
    //     ▫ می‌توان نسخه‌ی Mock از IEmployeeService ساخت تا در تست‌های Unit بدون دیتابیس استفاده شود.
    //
    // 🔹 وابستگی به DTO:
    //     ▫ در این فایل مستقیماً به DTOها اشاره‌ای نشده (اینجا فقط منطق بررسی تعریف می‌شود).
    //
    // 🔹 تگ انتشار RiRaDocs:
    //     RiraDocs-v2025.11.4-Stable-Final-Fixed
    // ===========================================================================================
}
