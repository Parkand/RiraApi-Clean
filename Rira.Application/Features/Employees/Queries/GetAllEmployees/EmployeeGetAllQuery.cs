using MediatR;
using Rira.Application.Common;
using Rira.Application.DTOs;
using System.Collections.Generic;

namespace Rira.Application.Features.Employees.Queries.GetAllEmployees
{
    // 🎯 کوئری اصلی برای بازیابی لیست تمام کارمندان سیستم ریرا
    // ------------------------------------------------------------------
    // این کلاس بخشی از الگوی CQS (Command Query Separation) است،
    // که در آن Queryها صرفاً برای دریافت داده‌ها و نه تغییر در وضعیت سیستم استفاده می‌شوند.
    //
    // ⚙️ نقش این کلاس:
    //   ▫ تعریف ساختار درخواست جهت دریافت همه‌ی کارمندان از دیتابیس.
    //   ▫ ارسال این درخواست به Handler مخصوص (EmployeeGetAllQueryHandler)
    //     از طریق MediatR Pipeline.
    //
    // 📦 خروجی استاندارد این Query از نوع ResponseModel<List<EmployeeDTO>> است،
    // به این معنی که داده‌ها همراه با وضعیت، پیام و متادیتاهای کنترلی بازگردانده می‌شوند.
    public class EmployeeGetAllQuery : IRequest<ResponseModel<List<EmployeeDTO>>>
    {
        // 🔹 نکته: این نسخه از Query هیچ پارامتری ندارد
        // ------------------------------------------------------------
        // در معماری فعلی، هدف بازیابی تمام داده‌های موجود در جدول Employees است.
        // اما در فازهای آتی می‌توان به این کلاس پارامترهایی برای فیلتر و صفحه‌بندی اضافه کرد، مانند:
        //
        //    ▫ bool? IsActive         → فقط کارمندان فعال را بگیرد.
        //    ▫ string? JobTitle       → بر اساس سمت، فیلتر انجام دهد.
        //    ▫ int Page, int PageSize → صفحه‌بندی لیست خروجی.
        //
        // تمام این قابلیت‌ها در Handler با EF Core قابل پیاده‌سازی‌اند و ساختار Query انعطاف‌پذیر است.
    }

    // ===========================================================================================
    // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
    // -------------------------------------------------------------------------------------------
    // 🔹 الگوی Query در معماری CQRS و MediatR:
    //     ▫ هر Query تنها مسئول "خواندن داده" است و نباید وضعیت سیستم را تغییر دهد.
    //     ▫ در اینجا، EmployeeGetAllQuery درخواست تمام کارمندان را ارسال می‌کند.
    // 🔹 Handler مربوطه (EmployeeGetAllQueryHandler) عملیات زیر را انجام می‌دهد:
    //     (1) واکشی داده‌ها از DbContext با EF Core.
    //     (2) نگاشت داده‌ها از Entity به DTO (با AutoMapper).
    //     (3) بسته‌بندی خروجی در قالب ResponseModel<List<EmployeeDTO>> برای بازگرداندن به Controller.
    // 🔹 مزیت این ساختار:
    //     ▫ جداسازی کامل Concern خواندن داده از عملیات نوشتن یا ویرایش.
    //     ▫ تست‌پذیری بالا و افزایش خوانایی منطق کاربردی.
    // 🔹 نکته معماری:
    //     در آینده می‌توان نسخه‌های Generic از Queryها طراحی کرد (GetAll<TEntity, TDto>)
    //     تا کد تکراری در پروژه کاهش یابد.
    // 🔹 هیچ تغییر اجرایی در کد داده نشده – تنها توضیحات آموزشی فارسی افزوده شدند.
    // ===========================================================================================
}
