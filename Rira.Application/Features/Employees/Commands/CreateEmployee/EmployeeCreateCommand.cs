using MediatR;
using Rira.Application.Common;
using static Rira.Application.DTOs.EmployeeDTO;

namespace Rira.Application.Features.Employees.Commands.CreateEmployee
{
    // 🧾 فرمان ایجاد کارمند جدید در سیستم (EmployeeCreateCommand)
    // ------------------------------------------------------------
    // این کلاس یکی از فرمان‌های (Command) بخش CQRS در پروژه ریرا است.
    // هدف آن ارسال درخواست ایجاد کارمند جدید از طریق MediatR به Handler مربوطه می‌باشد.
    // با اجرای این فرمان، سیستم داده‌ها را از سمت API دریافت و عملیات درج (Insert) را در دیتابیس انجام می‌دهد.
    public class EmployeeCreateCommand : IRequest<ResponseModel<int>>
    {
        // نام کوچک کارمند
        // ------------------------------------------------------------
        // این فیلد ضروری است و در Handler مربوطه اعتبارسنجی می‌شود.
        // اگر مقدار خالی باشد، از طریق Validator خطا برگردانده خواهد شد.
        public string FirstName { get; set; } = string.Empty;

        // نام خانوادگی کارمند
        // ------------------------------------------------------------
        // همراه با FirstName برای ساخت FullName در Entity به کار می‌رود.
        public string LastName { get; set; } = string.Empty;

        // شماره موبایل کارمند (یکتا و معتبر)
        // ------------------------------------------------------------
        // از طریق Validator بررسی می‌شود که حتماً فرمت عددی ۱۱ رقمی داشته باشد
        // و در جدول Employees تکراری نباشد.
        public string MobileNumber { get; set; } = string.Empty;

        // ایمیل کاری (اختیاری ولی با فرمت معتبر)
        // ------------------------------------------------------------
        // اگر وارد شود، باید با الگوی استاندارد ایمیل (Regex) تطابق داشته باشد.
        // در صورتی که تهی باشد مشکلی در ایجاد کارمند ایجاد نمی‌کند.
        public string? Email { get; set; }

        // تاریخ تولد شمسی کارمند (فرمت yyyy/MM/dd)
        // ------------------------------------------------------------
        // فیلدی از نوع رشته است تا بتوان از DateHelper برای تبدیل به تاریخ شمسی استفاده کرد.
        // در Handler این مقدار برای فیلد BirthDate در Entity تبدیل می‌شود.
        public string BirthDatePersian { get; set; } = string.Empty;

        // سطح تحصیلات (EducationLevelEnum)
        // ------------------------------------------------------------
        // از نوع Enum تعریف‌شده در EmployeeDTO است.
        // در فرآیند ذخیره‌سازی، این مقدار به مقدار عددی Enum نگاشت می‌شود.
        public EducationLevelType? EducationLevel { get; set; }

        // جنسیت کارمند
        // ------------------------------------------------------------
        // مقدار True نشان‌دهندهٔ "مرد" و False نشان‌دهندهٔ "زن" است.
        // در Domain معمولاً به Enum GenderType نگاشت می‌شود.
        public bool IsMale { get; set; }

        // ===========================================================================================
        // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
        // -------------------------------------------------------------------------------------------
        // کلاس EmployeeCreateCommand یکی از اجزای الگوی CQRS است که وظیفه دارد داده‌های ورودی
        // از Controller را به Handler منتقل کند. MediatR با واسطهٔ IRequest<ResponseModel<int>>
        // مشخص می‌کند خروجی مورد انتظار عملیات یک ResponseModel حاوی Id کارمند ایجادشده است.
        // این کلاس نباید هیچ منطق تجاری داشته باشد — فقط حامل داده است.
        // Handler مرتبط (EmployeeCreateCommandHandler) مسئول اعمال منطق Save در DbContext است.
        // با این ساختار، جداسازی کامل Command از Domain و Infrastructure تضمین می‌شود.
        // هیچ تغییر اجرایی در کد صورت نگرفته؛ فقط کامنت‌های آموزشی و توضیحات فارسی اضافه شده.
        // ===========================================================================================
    }
}
