using MediatR;
using Rira.Application.Common;
using static Rira.Application.DTOs.EmployeeDTO;

namespace Rira.Application.Features.Employees.Commands.UpdateEmployee
{
    // 🎯 فرمان ویرایش اطلاعات کامل کارمند (CQRS + MediatR)
    // ------------------------------------------------------------
    // این کلاس یکی از فرمان‌های (Command) اصلی در حوزه‌ی "مدیریت کارمندان" است.
    // هدف آن ارسال داده‌های ویرایشی از سمت Controller به Handler است.
    // Handler مرتبط (EmployeeUpdateCommandHandler) وظیفه دارد داده‌ها را اعتبارسنجی کند،
    // رکورد موجود را از DbContext واکشی کرده و مقادیر جدید را جایگزین نماید.
    //
    // این فرمان ساختار ورود اطلاعات کارمند را در سطح Application مشخص می‌کند و
    // به کمک سیستم Mapper، به مدل دامنه (Domain Entity) نگاشت می‌شود.
    public class EmployeeUpdateCommand : IRequest<ResponseModel<int>>
    {
        // شناسه‌ی کارمند هدف برای ویرایش
        // ------------------------------------------------------------
        // فیلد ضروری جهت شناسایی کارمند موجود در دیتابیس.
        // Handler از این مقدار برای جستجو در جدول Employees استفاده می‌کند.
        public int Id { get; set; }

        // 👤 نام کوچک کارمند (اختیاری برای ویرایش)
        public string? FirstName { get; set; }

        // 👤 نام خانوادگی کارمند
        public string? LastName { get; set; }

        // 📱 شماره موبایل (باید یکتا باشد)
        // ------------------------------------------------------------
        // اگر مقدار جدیدی وارد شود، در Handler بررسی می‌شود
        // که با شماره موبایل‌های دیگر در Conflict نباشد.
        public string? MobileNumber { get; set; }

        // 📧 ایمیل کاری (اختیاری)
        // ------------------------------------------------------------
        // اگر مقدار جدیدی داده شود باید الگوی صحیح ایمیل را داشته باشد.
        public string? Email { get; set; }

        // 🎂 تاریخ تولد شمسی
        // ------------------------------------------------------------
        // در قالب رشته‌ای به فرمت yyyy/MM/dd نگهداری می‌شود
        // و در مرحله‌ی نگاشت، به DateTime میلادی تبدیل می‌گردد.
        public string? BirthDatePersian { get; set; }

        // 🚻 جنسیت کارمند (True=مرد، False=زن)
        public bool? IsMale { get; set; }

        // 🎓 سطح تحصیلات از نوع Enum (Diploma=1, Bachelor=3, Master=4, ...)
        public EducationLevelType? EducationLevel { get; set; }

        // 🪪 کد ملی (اختیاری)
        // ------------------------------------------------------------
        // اگر وارد شود، می‌تواند برای تطبیق با سیستم‌های هویتی استفاده گردد.
        public string? NationalCode { get; set; }

        // 💼 عنوان شغلی کارمند
        // ------------------------------------------------------------
        // به صورت متن آزاد نگهداری می‌شود تا تغییرات سریع سازمانی را پوشش دهد.
        public string? JobTitle { get; set; }

        // 🕓 تاریخ استخدام (به زمان UTC ذخیره می‌شود)
        // ------------------------------------------------------------
        // این فیلد معمولاً در هنگام ایجاد پر می‌شود، اما در ویرایش می‌تواند
        // تغییر داده شود یا برای اصلاح داده‌های تاریخی استفاده گردد.
        public DateTime? HireDateUtc { get; set; }

        // 🔘 وضعیت فعال بودن کارمند
        // ------------------------------------------------------------
        // برای مدیریت کارمندان غیرفعال (مثل مرخصی طولانی یا بازنشسته‌ها) استفاده می‌شود.
        public bool? IsActive { get; set; }

        // 📝 توضیحات اضافی مدیریتی
        // ------------------------------------------------------------
        // فضای آزاد برای درج یادداشت‌های HR یا واحد منابع انسانی
        // بدون تأثیر در منطق کاری سیستم.
        public string? Description { get; set; }

        // ===========================================================================================
        // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
        // -------------------------------------------------------------------------------------------
        // 🔹 کلاس EmployeeUpdateCommand یک DTO مشابه مدل ورودی در الگوی CQRS است
        // که از IRequest<ResponseModel<int>> ارث می‌برد تا با MediatR هماهنگ باشد.
        // 🔹 Handler مربوطه پس از دریافت این Command:
        //     (1) رکورد کارمند را با Id واکشی می‌کند؛
        //     (2) وجود داده‌ها و تغییر یکتا بودن شماره یا ایمیل را بررسی می‌کند؛
        //     (3) مقادیر جدید را نگاشت و در DbContext ذخیره می‌نماید.
        // 🔹 این طراحی باعث جداسازی لایه‌های Presentation و Domain می‌شود
        // و از تداخل مستقیم Entityها با Controller جلوگیری می‌کند.
        // 🔹 ResponseModel<int> مقدار Id و پیام نتیجه را پس از عملیات برمی‌گرداند.
        // 🔹 هیچ تغییری در منطق کد داده نشده — تنها توضیحات آموزشی فارسی اضافه گردید.
        // ===========================================================================================
    }
}
