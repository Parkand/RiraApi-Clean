using MediatR;
using Rira.Application.Common;
using Rira.Application.DTOs;

namespace Rira.Application.Features.Tasks.Queries.GetById
{
    // 🧩 کلاس کوئری دریافت جزئیات یک تسک — TaskGetByIdQuery
    // -------------------------------------------------------------------
    // این کلاس بخش "Query" از الگوی CQRS را برای ماژول Task پیاده‌سازی می‌کند.
    // هدف این Query، دریافت اطلاعات یک تسک خاص از سیستم بر اساس شناسه (Id) است.
    //
    // 📌 جایگاه در معماری:
    //     ▫ وظیفه‌ی Queryها صرفاً "خواندن" (Read) داده‌ها است، بدون هیچ تغییر در حالت سیستم.
    //     ▫ Commandها برعکس، برای نوشتن و حذف و به‌روزرسانی داده‌ها استفاده می‌شوند.
    //
    // ⚙️ فرآیند کلی اجرا:
    //     1️⃣ Controller (متد GET با پارامتر Id) یک نمونه از TaskGetByIdQuery ایجاد می‌کند.
    //     2️⃣ MediatR این Query را به هندلر متناظر می‌فرستد: TaskGetByIdQueryHandler.
    //     3️⃣ هندلر داده‌ی مربوط به تسک را از DbContext واکشی کرده و در قالب DTO برمی‌گرداند.
    //     4️⃣ نتیجه نهایی به صورت ResponseModel<TaskDto> بازگردانده می‌شود.
    //
    // 🧠 طراحی مینیمال و قابل تست: کلاس Query فقط داده‌های ورودی را نگه می‌دارد.
    public class TaskGetByIdQuery : IRequest<ResponseModel<TaskDto>>
    {
        // 🔹 ویژگی Id — شناسه یکتای تسک مورد نظر
        // -------------------------------------------------------------------
        // این Property به عنوان ورودی اصلی برای هندلر عمل می‌کند تا رکورد تسک خاصی را واکشی نماید.
        // مقدار آن توسط Controller مقداردهی می‌شود.
        //
        // ✅ نکته: مقدار Id باید مثبت باشد و معمولاً توسط Validator بررسی خواهد شد.
        public int Id { get; set; }
    }

    // ===========================================================================================
    // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
    // -------------------------------------------------------------------------------------------
    // 🔹 مسئولیت کلاس:
    //     ▫ تعریف Query برای درخواست دریافت جزئیات یک تسک با شناسه مشخص.
    //     ▫ بدون هیچ منطق اجرایی یا دیتابیس، فقط نگهداری داده‌ی ورودی.
    //
    // 🔹 نوع بازگشت:
    //     ▫ ResponseModel<TaskDto> شامل:
    //         - Success: نتیجه موفق یا ناموفق بودن واکشی
    //         - Message: پیام خوانا برای کاربر (مثل "تسک یافت شد" یا "تسک موجود نیست")
    //         - StatusCode: مانند 200 یا 404
    //         - Data: شیء TaskDto شامل جزئیات عنوان، توضیحات، وضعیت و غیره.
    //
    // 🔹 ارتباط معماری:
    //     ▫ TaskGetByIdQuery ← [MediatR] → TaskGetByIdQueryHandler
    //     ▫ جداسازی کامل لایه Application از Controller و DbContext.
    //
    // 🔹 تست‌پذیری:
    //     ▫ می‌توان با ساخت شیء از این Query و ارسال به هندلر،
    //       عملکرد جریان "دریافت بر اساس Id" را به‌صورت Unit Test بررسی کرد.
    //
    // 🔹 بدون تغییر اجرایی در منطق برنامه — فقط مستندسازی آموزشی فارسی اضافه شده است.
    // ===========================================================================================
}
