using MediatR;
using Rira.Application.Common;

namespace Rira.Application.Features.Tasks.Commands.Delete
{
    // 🧩 فرمان (Command) حذف تسک از سیستم — مبتنی بر CQRS و MediatR
    // -------------------------------------------------------------------
    // این کلاس مسئول حمل دادهٔ لازم برای حذف یک تسک است.
    // در معماری CQRS، هر عملیات تغییر‌دهنده‌ی وضعیت سیستم (Create, Update, Delete)
    // توسط "Command" شناخته می‌شود و از طریق Handler مخصوص خودش اجرا می‌گردد.
    //
    // ⚙️ روند اجرای این Command:
    //     ▪ Controller مربوطه، Command را ارسال می‌کند.
    //     ▪ MediatR آن را به TaskDeleteCommandHandler هدایت می‌کند.
    //     ▪ Handler مسئول دریافت Id و انجام حذف نرم (Soft Delete) در پایگاه داده است.
    //
    // 🧠 نکته:
    //     در سامانه Rira، مدل "Soft Delete" استفاده می‌شود؛ یعنی رکورد حذف‌شده
    //     در فیلد IsDeleted = true علامت می‌خورد، نه حذف فیزیکی از جدول.
    //
    // 📦 خروجی:
    //     ResponseModel<int>  →  نشان‌دهندهٔ نتیجهٔ عملیات و Id رکورد حذف‌شده (در صورت موفقیت)
    public class TaskDeleteCommand : IRequest<ResponseModel<int>>
    {
        // 📌 شناسه‌ی تسک برای حذف
        // -------------------------------------------------------------------
        // فقط همین شناسه برای حذف کافی است. Handler بر اساس این مقدار،
        // رکورد را از DbContext واکشی می‌کند، وضعیت IsDeleted آن را True می‌کند
        // و سپس تغییرات را ذخیره می‌نماید.
        //
        // ✅ Example:
        //     DELETE /api/tasks/5
        //     → Id = 5
        public int Id { get; set; }
    }

    // ===========================================================================================
    // 📘 خلاصه آموزشی (RiraDocs Teaching Edition)
    // -------------------------------------------------------------------------------------------
    // 🔹 Command:
    //     ▫ بخش "نوشتنی" (Write Operation) از CQRS است.
    //     ▫ فقط هدفِ حذف رکورد را دارد، نه واکشی داده.
    //
    // 🔹 Handler متناظر:
    //     ▫ TaskDeleteCommandHandler → شامل منطق حذف نرم از پایگاه داده.
    //     ▫ در صورت عدم وجود تسک، ResponseModel با پیام خطای NotFound بازگردانده می‌شود.
    //
    // 🔹 ResponseModel<int>:
    //     ▫ قالب پاسخ استاندارد پروژه Rira با چهار بخش:
    //       (Success, Message, StatusCode, Data)
    //
    // 🔹 تست‌پذیری:
    //     ▫ به‌دلیل جدایی Command از Handler، انجام تست واحد ساده است.
    //       می‌توان TaskDeleteCommand را به‌صورت جداگانه با مقادیر مختلف Id بررسی کرد.
    //
    // 🔹 هیچ تغییری در منطق اجرایی کد اعمال نشده است — تنها توضیحات فارسی آموزشی افزوده شدند.
    // ===========================================================================================
}
